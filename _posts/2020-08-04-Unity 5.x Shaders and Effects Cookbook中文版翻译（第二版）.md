---
category: shader
tags: [U3D, Shader,Cookbook,中文版]
---

​		我打算试着翻译这本技术书，目的又两个，1.希望自己能帮助英文不太好的朋友，2.希望自己也学到这些知识，顺便帮助自己提升英语水平。我英语水平不是很好，接下来如果有什么错误的地方，有看到的朋友还请帮忙纠正。我不会web前端技术，我想试着学学markdown语法，尽量让页面好看些但是最重要的还是内容。

  

## Unity 5.x Shaders and Effects Cookbook中文版（第二版）



## 目录表

## [鸣谢](#credits)

## [关于作者](#about_author)

## [www.PacktPub.com](#packtpub)

* [电子书, 优惠, 还有其他](#ebook)

* [为什么需要订阅?](#subscribe)

## [前言](#preface)

- [这本书包含哪些内容](#whatcover)

- [学习的过程中你需要准备的](#youneed)

- [本书的适合人群](#who_for)

- [内容结构](#sections)

  + [始前准备](#sections)

  + [操作步骤](#sections)

  - [原理介绍](#sections)

  + [额外内容](#sections)

  - [相关补充](#sections)

- [本书的一些文体说明](#Conventions)

- [读者反馈](#feedback)

- [客户支持](#support)

  - [示例代码下载](#codedownload)

  - [本书一些彩图的下载](#downloadPDF)

  - [勘误表](#errata)

  - [盗版声明](#piracy)

  - [本书有问题请联系](#questions)

## 1.创建你的第一个着色器

- 介绍

- 创建一个基本的标准着色器

  - 始前准备

  - 操作步骤

  - 原理介绍

  - 额外内容

- 如何把Unity 4的旧着色器迁移至Unity 5

  - 始前准备

  - 操作步骤

    - 着色器版本的自动升级

    - 使用标准着色器

    - 迁移用户自定义的着色器

  - 原理介绍

  - 额外内容

- 给着色器添加属性

  - 始前准备

  - 操作步骤

  - 原理介绍

  - 额外内容

- 使用表面着色器的属性

  - 操作步骤

  - 原理介绍

  - 相关补充

  - 额外内容

## 2.表面着色器和贴图映射

- 介绍

- 漫反射的着色处理

  - 始前准备

  - 操作步骤

  - 原理介绍

- 使用压缩数组

  - 操作步骤
    - 压缩矩阵

  - 额外内容

- 向着色器添加贴图

  - 始前准备

  - 操作步骤

  - 原理介绍

  - 相关补充

  - 额外内容

- 通过改变UV值来移动贴图

  - 始前准备

  - 操作步骤

  - 原理介绍

- 法线映射

  - 始前准备

  - 操作步骤

  - 原理介绍

  - 相关补充

- 创建一个带透明通道的材质

  - 始前准备

  - 操作步骤

  - 原理介绍

- 创建一个有全息效果的着色器

  - 始前准备

  - 操作步骤

  - 原理介绍

  - 相关补充

  - 额外内容

- 贴图的压缩和混合

  - 始前准备

  - 操作步骤

  - 原理介绍

- 在地形的表面画一个圆

  - 始前准备

  - 操作步骤
    - 在表面移动这个圆

  - 原理介绍

## 3. 理解照明模型

- 介绍

- 创建一个自定义的漫反射光照模型

  - 始前准备

  - 操作步骤

  - 原理介绍

- 创建一个卡通风格的着色器

  - 始前准备

  - 操作步骤

  - 原理介绍

  - 相关补充

- 创建一个Phong类型的镜面反射着色器

  - 始前准备

  - 操作步骤

  - 原理介绍

- 创建 BlinnPhong 类型的镜面反射着色器

  - 始前准备

  - 操作步骤

  - 原理介绍

  - 额外内容

- 创建各向异性类型的镜面反射着色器

  - 始前准备

  - 操作步骤

  - 原理介绍

## 4.Unity 5中基于物理原理的渲染

- 介绍

- 理解着色器中金属质感属性的设置

  - 始前准备

  - 操作步骤

  - 原理介绍

  - 额外内容

- 物理原理的渲染中添加透明通道

  - 始前准备

  - 操作步骤

    - 半透明材质

    - 物体如何消失

    - 如何在显示物体中挖一个孔

  - 额外内容

- 创建一面镜子和反射面

  - 始前准备

  - 操作步骤

  - 原理介绍

  - 额外内容

- 场景中光的烘培

  - 始前准备

  - 操作步骤

    - 场景中静态集合体的设置

    - 光探针的设置

    - 开始烘培光

  - 原理介绍

  - 额外内容

## 5.顶点的操作方法

- 介绍

- 在表面着色器中访问顶点颜色

  - 始前准备

  - 操作步骤

  - 原理介绍

  - 相关补充

- 对表面着色器中的顶点使用动画

  - 始前准备

  - 操作步骤

  - 原理介绍

- 模型的形变

  - 始前准备

  - 操作步骤

  - 原理介绍

  - 相关补充
    - 添加形变贴图

- 实现一个被雪覆盖的着色器

  - 始前准备

  - 操作步骤

  - 原理介绍

    - 为物体表面设置颜色

    - 修改几何体

  - 额外内容

- 实现范围体爆炸

  - 始前准备

  - 操作步骤

  - 原理介绍

  - 相关补充

  - 额外内容

## 6.片元着色器和通道提取

- 介绍

- 理解顶点和片元着色器

  - 始前准备

  - 操作步骤

  - 原理介绍

  - 相关补充

    - 顶点的输入语义

    - 顶点的输出语义

  - 额外内容

- 使用通道提取

  - 始前准备

  - 操作步骤

  - 原理介绍

  - 相关补充

- 实现一个玻璃效果的着色器

  - 始前准备

  - 操作步骤

  - 原理介绍

  - 相关补充

- 在2D游戏中实现水效果的着色器

  - 始前准备

  - 操作步骤

  - 原理介绍

## 7. 移动设备中着色器的调整

- 介绍

- 什么是着色器的轻量化?

  - 始前准备

  - 操作步骤

  - 原理介绍

- 着色器的性能分析

  - 始前准备

  - 操作步骤

  - 原理介绍

  - 相关补充

- 针对移动设备修改着色器

  - 始前准备

  - 操作步骤

  - 原理介绍

## 8.通过Unity 渲染贴图实现屏幕特效

- 介绍

- 设置屏幕特效脚本系统

  - 始前准备

  - 操作步骤

  - 原理介绍

  - 相关补充

- 亮度, 饱和度和对比度在屏幕特效中的作用

  - 始前准备

  - 操作步骤

  - 原理介绍

- 屏幕特效中基础的照片融合模式

  - 始前准备

  - 操作步骤

  - 原理介绍

  - 相关补充

- 屏幕特效中的叠加混合模式

  - 始前准备

  - 操作步骤

  - 原理介绍

## 9.游戏和屏幕特效

- 介绍

- 创建一个老电影屏幕特效

  - 始前准备

  - 操作步骤

  - 原理介绍

  - 额外内容

- 创建一个夜视仪效果的屏幕特效

  - 始前准备

  - 操作步骤

  - 原理介绍

  - 相关补充

## 10.更高级的着色器技术

- 介绍

- 使用Unity内建的CG包含文件功能

  - 始前准备

  - 操作步骤

  - 原理介绍

- CG包含文件功能如何让着色器模块化

  - 始前准备

  - 操作步骤

  - 原理介绍

- 实现一个毛皮效果的着色器

  - 始前准备

  - 操作步骤

  - 原理介绍

  - 相关补充

- 如何通过数组来实现热图

  - 始前准备

  - 操作步骤

  - 原理介绍







***

<span id="credits"></span>

**鸣谢** 

**本书作者** 

Alan Zucconi 

Kenneth Lammers 

**审稿** 

Kenneth Lammers 

**组稿编辑** 

Priya Singh 

**策划编辑** 

Rahul Nair 

Erol Staveley 

**项目内容编辑** 

Mehvash Fatima 

**技术编辑** 

Pranil Pathare 

Danish Shaikh 

**文字编辑** 

Tasneem Fatehi 

**项目助理** 

Kinjal Bari 

**校对员** 

Safis Editing 

**索引员** 

Monica Ajmera Mehta 

**图像** 

Kirk D’Penha 

Disha Haria 

**制作协调员** 

Nilesh Mohite 

**封面设计** 

Nilesh Mohite



---

<span id="about_author"></span>

**关于作者** 

**Alan Zucconi** 是一个充满激情的开发者, 作者, 和一个激励的演讲者, 是开发者领域的佼佼者。 有着过去10年来相关领域的专业技能积累，并且决定在今后把精力都放在学术领域和游戏产业领域。作为一名自由职业者，他以非凡的创造力去探索如何让游戏更好的与艺术结合。  在此之前，他在伦敦帝国理工学院工作，在这里他发现了他教学和写作的激情。 他的头衔包括了 gravity puzzle, 0RBITALIS, 和the upcoming time travel platformer, Still Time（这些单词实在不知道怎么翻译了，应该是游戏名字）. 

**Kenneth Lammers** 在游戏领域有超过15年的经验, 担任过角色艺术家，技术美术，技术美术总监，和程序员。这让他有机会参与《使命召唤3》《除暴战警2》 《心灵杀手》和《Kinect星球大战》等众多著名游戏的开发。他现在跟他的商业伙伴**Noah Kaarbo**一起运营自己的Ozone 工作。，同时，他们也跟亚马逊，Eline Media，IGT和微软也有过合作。他之前为微软游戏工作室，动视和Surreal工作过。现如今他离开了哪些工作室，一手开办了自己的 CreativeTD 和 Ozone 工作室（感觉翻译成互动娱乐更好）。Kenny通过Packt Publishing出版社写了他的第一版 《Unity Shaders and Effects Cookbook》书，整个过程非常的愉快。

***

<span id = "packtpub"></span>

## [www.PacktPub.com](https://www.packtpub.com/)

这是一个电子书的网站，等于是帮这个网站宣传了吧，大家直接点击超链接进去看就行了。一般来说，你只要在上面买了电子书，特别是技术书籍，相关的代码，附件也可以从上面下载。

***

<span id = "ebook"></span>

**电子书, 优惠折扣, 额外信息**

**Packt **电子书网站拥有包含pdf和ePub格式的所有已经出版的书籍的电子书。你可以在www.PacktPub.com 更新你的电子书版本并且如果你购买过相应的纸质书籍的话，可以在购买对应的电子版本时享有折扣。你可以通过 <customercare@packtpub.com> 这个邮箱向我们了解优惠的详细信息。你可以在 www.PacktPub.com 阅读一系列免费的技术文章，现在在网站注册可以获知最新的免费和折扣信息 

[https://www2.packtpub.com/books/subscription/packtlib ](https://www2.packtpub.com/books/subscription/packtlib)

（告诉大家一个不幸的消息，上面这个网址已经过期了） 

你是否因为IT技术问题缺乏具体的示例而苦恼，上面这个网站也许可以帮到你，这是一个在线的数字图书馆。你可以在这个数字图书馆上搜索，获取资料和阅读**Packt**电子书网站为你准备的丰富的电子书。



***

<span id = "subscribe"></span>

**为什么希望你订阅?** 

可以查阅所有 **Packt**网站发布的的书籍 

可以拷贝，打印所有书籍 

可以通过浏览器查找你最需要的资料



***

<span id = "preface">

## 前言

**Unity 5.x Shaders and Effects Cookbook**这本书能让你在Unity5引擎中创建着色器和特效更加得心应手，能让你入门起来比较容易，学会创建大部分基础的着色器，并且学会如何组织你的着色器代码。本书的章节安排是循序渐进的，每一章节的基础知识，旨在后面让你能实现更高级的技术技巧，比如实现范围体爆炸效果，毛皮特效等。这本书是专门在Unity5这个游戏引擎下讲解的，希望帮助你掌握诸如基于物理原理的渲染和全局光照等知识，让你尽可能获得照片级的效果。 

在每一章的结尾，你都会获得一些新的技巧，这些技巧有助于提高你的着色器质量并且让你在写着色器的时候更加有效率。 为了让你能从入门到专家，每一个章节的特殊技巧和知识点都是我们为你精心编排的。对于着色器的初学者来说，你也可以通过一个章节一个章节的阅读，逐渐丰富你的着色器知识。不管怎样，通过本书的知识点，可以让你的游戏在次世代看起来更棒。当你完成这本书的学习之后，在Unity3d创建游戏的过程中，你就可以有各种各样的着色器用于你的游戏，并且了解怎么向你的游戏中去添加它们，怎么向你的游戏添加各种特效，怎么去优化你的游戏。让我们开始吧。

***

<span id = "whatcover"></span>

**这本书包含哪些内容** 

**<u>第一章</u>**,创建你的第一个着色器, 向你介绍如何在unity4和unity5中编写着色器代码（我会试着在unity2018上去实验，保证shader代码的正常执行，不限于unity4和5）。 

**<u>第二章</u>**, 表面着色器和贴图映射, 介绍了一些如何实现表面着色器的通用且实用的技术，比如如何给游戏模型使用贴图和法线贴图。 

**<u>第三章</u>**, 理解照明模型，带你深入理解在给模型使用着色器时光带来的影响，这一章会教你一些如何实现自定义的光照模型的技术技巧，以便于你去实现一些独特的特效，比如卡通着色器效果。 

**<u>第四章</u>**, Unity 5中基于物理原理的渲染, 这一章为你介绍在unity5中基于物理原理的标准渲染技术，这些技术主要是为了在你的游戏中实现次世代的画面（直译就是看起来跟现实世界一样）。会向你解释如何尽可能的模拟这种现实，让你对透明通道，反射表面和全局光照有更深入的理解。 

**<u>第五章</u>**, 顶点的操作方法,向你介绍如何使用着色器来修改游戏中物体的几何特性；想知道范围体爆炸，着色器模拟下雪等特效嘛？这一章里的着色器操作顶点的技术技巧会告诉你如何实现 

**<u>第六章</u>**, 片元着色器和通道提取, 这一章会解释如何使用半透明材质和通道提取来实现扭曲形变效果 

**<u>第七章</u>**, 移动设备中着色器的调整，主要介绍如何针对移动设备进行优化。 

**<u>第八章</u>**, 通过Unity 渲染贴图实现屏幕特效,介绍了通过该技术才能更容易实现的视觉特效的实现方式。 

**<u>第九章</u>**, 游戏和屏幕特效,向你介绍一些游戏后处理特效，让游戏模拟的更加真实，比如夜视仪特效。 

**<u>第十章</u>**, 更高级的着色器技术,介绍一些向毛坯特效的着色器，热图渲染等本书会涉及的大部分高级技术技巧  

***

<span id="youneed"></span>

**学习的过程中你需要准备的**
下面列举了在学习本书知识的过程中必须的工具软件和可选的工具软件:

- Unity5引擎
- 一款3D建模软件，比如Maya，3DMax，或Blender (可选l)
- 一款2D图片编辑软件，比如PS或者Gimp (可选)  



***

<span id = "who_for"></span>

**本书的适合人群** 

本书适合色器编程初学者，或者想通过专业的后处理特效让游戏更棒的开发者。 

当然开发者本身需要对Unity游戏引擎有比较深入的理解。

***

<span id = "sections"></span> 

**内容结构** 

在本书中， 会经常出现一系列的小标题 (**始前准备**，**操作步骤**，**原理介绍**，**额外内容** ，**相关补充**)。

主要功能是对每一个知识点进行说明，如何完成该知识点的掌握。下面说明具体的用法： 



- **始前准备** 

  这个部分会告诉你这个知识点会学习什么，怎么安装和设置对应的软件。 

- **操作步骤**

  这个部分包含了学习该知识点包含那些步骤。

- **原理介绍**

  该部分通常是为了详细解释“**操作步骤**”这个部分的知识原理，上面的每一步到底做了什么。

- **额外内容**

  为了让读者了解更多与该知识点相关的额外知识，我们才准备了这个额外信息让读者阅读。

- **相关补充**

  如果想了解更多与该知识点相关的信息，这里还额外提供了一些相关链接。



***

<span id = "Conventions"></span>

**本书的一些文体说明** 

在书中你可以发现很多种不同的文本样式用来表示不同的信息内容。这里列举几个来解释一下。（需要说明一下的是，我在翻译的过程中，代码的字体样式可能会跟书本上不一样，我主要是用markdown的代码块来表示。然后它的粗体，比如强调，那我就用markdown中的强调标签来表示，说声抱歉了，希望大家能看的懂）

代码块，数据库表名，文件夹名字 ，文件名字，文件扩展名，路径名称，虚拟URL（觉得这个翻译不准确），用户输入，推特账号等会按照如下表示：“请输入下面的代码到你的着色器属性块（**Properties **）中” 

```shader
void surf (Input IN, inout SurfaceOutput o) 
{ 
	float4 c; 
	c = pow((_EmissiveColor + _AmbientColor), _MySliderValue); 
	o.Albedo = c.rgb; o.Alpha = c.a;
}  
```

当我们想提醒你代码块中的特别部分，那么对应的代码行或者语句会用粗体标记,比如那个void：(代码块中我不知道怎么加粗，下面这个就不用代码块了)

**void** surf (Input IN, inout SurfaceOutputStandard o)  

{  

​	fixed4 c = pow((_Color + _AmbientColor), _MySliderValue);  

​	o.Albedo = c.rgb;  

​	o.Metallic = _Metallic; 

​	o.Smoothness = _Glossiness;  

​	o.Alpha = c.a;  

}



**新的术语** 和 **非常重要的词语** 都应该用粗体表示.像出现再电脑屏幕中的菜单和弹窗中的文本，也会用粗体加以强调。比如：“在Unity编辑器的菜单栏中的“**项目(Project)**,在**资产(Assets)**文件夹上右键单击和在菜单中选择**创建(Create)\|文件夹(Folder)**。” （中文后面括号里的是英文版的编辑器中菜单项的名字）

**注意(Note)** 

警告或者很重要的注意会像这样，有个**注意(Note)**提醒你。 

**提示(Tip)** 

提示和小技巧会像这样，有个**提示(Tip)**提示你。  

***

<span id="feedback"></span>

**读者反馈** 

非常欢迎来自各位读者的反馈。这能让我们知道你们是否喜欢这本书。你们给与的重要反馈可以让我们写出更适合且对你们更有帮助的内容。 

通常最简单的反馈方式是通过<feedback@packtpub.com>邮箱给我们发邮件，然后在反馈邮件的标题中告诉我们书标题。 

如果在本书中有你擅长领域的话题想跟我们讨论，或者你愿意把你专长领域的知识贡献给本书，也可以通过这个网址 [www.packtpub.com/authors](https://www.packtpub.com/authors)的指引进行操作



***

<span id="support"></span>

**客户支持** 

很高心您能拥有此书，为了让您物有所值，我们还为你准备了很多东西（很搞不懂这也要搞一个章节出来，就一句话）。

 

 

 

 

 

 

***

<span id="codedownload">

**示例代码下载** 

通过这个网站[http://www.packtpub.com](https://www.packtpub.com/)，你可以用自己的账号下载本书的实例代码(其实我本人是建议自己手动敲一遍，我试了一下，代码是可以直接在这个网站下载的，就算你没有购买这本书也是可以的。但是需要注册一个账号才行，然后搜索到这本书，这本书的页面下面就有下载代码的链接)。如果你在别的地方购买了这本书，那么你可以浏览网站[ http://www.packtpub.com/support](https://www.packtpub.com/support)注册一个账号，然后在该页面直接通过书名搜索，也能找到这些文件的下载链接。

代码文件可以通过下面的步骤获得：

1. 通过邮箱和账号密码在我们的[网站](https://www.packtpub.com/)上登陆或者注册。

2. 把网页拉到最下面，点击**支持主页([Support Home](https://www.packtpub.com/support))**（这本书出了很久了，网页早就改版了，这是我实际打开网页的操作步骤）。

3. 然后点击该页面左边的**代码下载&勘误表(Code Downloads & Errata)**。

4. 然后在**搜索(Search)**框中输入你的书名（不用输入完整的书名，支持模糊搜索）。

5. 选择那本你想要下载代码的书。

6. 然后在下面的下拉菜单中选择你是从哪儿购买本书的（不要紧，随便选一个，然后下拉菜单的下面就会有一个下载链接）。 

7. 然后点击**代码下载**（链接早就生成了，为了方便大家，我贴出链接，点击就可以[下载](https://account.packtpub.com/getfile/9781785285240/code)了，不清楚是否是永久链接）

下载好后，请自行解压，然后就可以获得本书的代码了。

 

 

 

 

 

 

***

<span id="downloadPDF">

**本书一些彩图的下载** 

这本书中的彩图，比如说屏幕截图/示意图我们都把他放在了一个PDF文件中。希望这些图片可以让你更好的理解屏幕输出图像的变化。 你可以通过下面的链接下载这个PDF文件[https://www.packtpub.com/sites/default/files/downloads/Unity5xShadersAndEffectsCookboo](https://static.packt-cdn.com/downloads/Unity5xShadersAndEffectsCookbook_SecondEdition_Graphics.pdf)





***

<span id="errata"></span>

**勘误表** 

尽管我们非常注意本书内容的准确性，但还是会有不小心出错的地方。如果您在我们出版的书中（不限本书）找到了错误，有可能是文字错误或者代码错误，我们非常欢迎您将这些错误报告给我们。如此善举，既解他人之惑，亦可助改善此书。如果您发现任何勘误，请通过链接[https://www.packtpub.com/support/errata](https://www.packtpub.com/support/errata) （原书写的链接失效了）向我们报告。当您的勘误确认后，您提交的勘误将会被接受并且勘误会上传至我们的网站和任何已存在的勘误名单中。 如果您想看看之前的勘误提交，可以访问[https://www.packtpub.com/support/code-downloads](https://www.packtpub.com/support/code-downloads)（原书的网址失效了，现在是这个），然后输入书名搜索，你想要的信息会出现在下面的勘误部分。

***

<span id="piracy"></span>

**盗版声明** 

在网上，所有媒体的版权资料盗版问题从未停歇。 在**Packt**网，我们非常重视保护我们的版权和许可证。如果你在英特网上看到任何来自我们工作成果的 非法拷贝，不管来自那里，还请你提供给我们地址或者网址，这样我们可以挽回我们的损失。还请通过<copyright@packtpub.com>邮箱联系我们。 

我们非常感激您帮助我们保护作者和保护我们继续给你带来有价值的内容。

***

<span id="questions">

**本书有问题请联系** 

如果您对本书有任何层面的问题，您可以通过邮箱<questions@packtpub.com>联系我们，我们会尽己所能改善这些问题。